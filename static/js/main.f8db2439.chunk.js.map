{"version":3,"sources":["components/Navbar.js","components/PiePiece.js","ListContext.js","pages/ChartPage.js","components/InputItem.js","pages/FormPage.js","App.js","index.js"],"names":["Navbar","className","to","PiePiece","props","data","startX","startY","endX","endY","largeArc","color","title","amount","startx","starty","endx","endy","largearc","length","abx","aby","ratio","Math","sqrt","getCen","cenX","cenY","polyValue","pieceName","charAt","toUpperCase","slice","d","key","fill","points","stroke","strokeWidth","x","y","transform","style","fontSize","Context","React","createContext","ContextProvider","useState","items","setItems","Provider","value","editItem","e","id","target","name","upd","map","el","addItem","Date","valueOf","random","prev","parseAmounts","parsed","item","isNaN","parseInt","abs","removeItem","filter","children","ChartPage","pies","setPies","render","setRender","useContext","useEffect","getPieces","totalSum","reduce","acc","i","accum","pieces","getCoordinates","total","percent","cos","PI","sin","viewBox","InputItem","validateField","classList","add","type","maxLength","onChange","placeholder","onFocus","remove","onBlur","min","onClick","preventDefault","handleRemove","FormPage","list","reverse","App","exact","path","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.f8db2439.chunk.js","sourcesContent":["import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\n\r\nexport default function Navbar() {\r\n\treturn (\r\n\t\t<div className=\"navbar\">\r\n\t\t\t<Link to=\"/\">Add</Link>\r\n\t\t\t<Link to=\"/view\">View</Link>\r\n\t\t</div>\r\n\t)\r\n}","import React from 'react'\r\n\r\nexport default function PiePiece(props) {\r\n\tconst {startX, startY, endX, endY, largeArc, color, title, amount} = props.data\r\n\t\r\n\t// get the middle point of polyline\r\n\tconst getCen = (startx, starty, endx, endy, largearc, length) => {\r\n\t\tconst [abx, aby] = largearc ? [-(startx + endx), -(starty + endy)] : [(startx + endx), (starty + endy)]\r\n\t\tconst abLen = Math.sqrt(abx*abx + aby*aby)\r\n\t\tconst ratio = length / abLen\r\n\t\tconst [acx, acy] = [abx*ratio, aby*ratio]\r\n\t\treturn [acx, acy]\r\n\t}\r\n\t\r\n\tconst [cenX, cenY] = getCen(startX, startY, endX, endY, largeArc, 1.3)\r\n\r\n\t// get full polyline attributes\r\n\tconst polyValue = cenY > 0 ? `0,0 ${cenX},${cenY} ${cenX},${cenY+0.7}` : `0,0 ${cenX},${cenY} ${cenX},${cenY-0.7}`\r\n\r\n\tconst pieceName = title ? title.charAt(0).toUpperCase() + title.slice(1) : amount\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<path \r\n\t\t\t\td={`M ${startX} ${startY} A 1 1 0 ${largeArc} 1 ${endX} ${endY} L 0 0`} \r\n\t\t\t\tkey={startX} \r\n\t\t\t\tfill={color}\r\n\t\t\t>\r\n\t\t\t\t\t<title>{pieceName}</title>\r\n\t\t\t</path>\r\n\t\t\t<polyline points={polyValue} stroke={color} fill=\"none\" strokeWidth=\"0.015\" />\r\n\t\t\t<text x={cenX} y={cenY > 0 ? cenY : cenY - 0.7} transform={`rotate(90 ${cenX} ${cenY > 0 ? cenY : cenY - 0.7}) translate(0 -0.05)`} style={{color: \"white\", fontSize: 0.15}}>{pieceName}</text>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\n","import React, {useState} from \"react\"\r\n\r\nconst Context = React.createContext()\r\n\r\nfunction ContextProvider(props) {\r\n\tconst [items, setItems] = useState([])\r\n\r\n\tconst addItem = () => {\r\n\t\tconst id = new Date().valueOf()\r\n\t\tconst color = `rgb(${Math.random() * 250}, ${Math.random() * 250}, ${Math.random() * 250})`\r\n\t\tsetItems(prev => [...prev, {title: \"\", amount: 0, id, color}])\r\n\t}\r\n\r\n\tconst editItem = (e, id) => {\r\n\t\tconst {name, value} = e.target\r\n\t\tconst upd = items.map(el => {\r\n\t\t\tif(el.id === id){\r\n\t\t\t\tel[name] = value\r\n\t\t\t}\r\n\t\t\treturn el\r\n\t\t})\r\n\t\tsetItems(upd)\r\n\t}\r\n\r\n\tconst removeItem = (id) => {\r\n\t\tconst upd = items.filter(item => item.id !== id)\r\n\t\tsetItems(upd)\r\n\t}\r\n\r\n\tconst parseAmounts = () => {\r\n\t\tconst parsed = items.map(item => {\r\n\t\t\treturn isNaN(parseInt(item.amount)) ? {...item, amount: 0} : {...item, amount: Math.abs(parseInt(item.amount))}\r\n\t\t})\r\n\t\tsetItems(parsed)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Context.Provider value={{items, editItem, addItem, parseAmounts, removeItem}}>\r\n\t\t\t{props.children}\r\n\t\t</Context.Provider>\r\n\t)\r\n}\r\n\r\nexport {ContextProvider, Context}","import React, {useState, useContext, useEffect} from 'react'\r\nimport {Link} from 'react-router-dom'\r\n\r\n\r\nimport PiePiece from '../components/PiePiece'\r\nimport {Context} from '../ListContext'\r\n\r\nexport default function ChartPage() {\r\n\tconst [pies, setPies] = useState([])\r\n\tconst [render, setRender] = useState(false)\r\n\tconst {items, parseAmounts} = useContext(Context)\r\n\r\n\t// additional input validation\r\n\tuseEffect(() => {\r\n\t\tparseAmounts()\r\n\t\tsetRender(true)\r\n\t}, [])\r\n\r\n\t// prevents svg errors, but causes a little loading glitch\r\n\tuseEffect(() => {\r\n\t\tif(render) {\r\n\t\t\tgetPieces()\r\n\t\t}\r\n\t}, [items, render])\r\n\r\n\r\n\tconst getPieces = () => {\r\n\r\n\t\tconst totalSum = items.reduce((acc, i) => {\r\n\t\t\treturn acc + parseInt(i.amount)\r\n\t\t}, 0)\r\n\r\n\t\tlet accum = 0\r\n\r\n\t\tconst pieces = items.map(item => {\r\n\r\n\t\t\tconst {title, amount, color} = item\r\n\r\n\t\t\tif(amount === 0 || typeof amount !== \"number\") {\r\n\t\t\t\treturn \"\"\r\n\t\t\t}\r\n\r\n\t\t\tconst [startX, startY] = getCoordinates(accum, totalSum)\r\n\t\t\taccum += amount\r\n\t\t\tconst [endX, endY] = getCoordinates(accum, totalSum)\r\n\r\n\t\t\tconst largeArc = totalSum / amount >= 2 ? 0 : 1\r\n\r\n\t\t\treturn <PiePiece key={color} data={{startX, startY, endX, endY, largeArc, color, title, amount}} />\r\n\t\t})\r\n\r\n\t\tsetPies(pieces)\r\n\t}\r\n\r\n\tconst getCoordinates = (value, total) => {\r\n\t\tconst percent = value / total \r\n\t\tconst x = Math.cos(2 * Math.PI * percent)\r\n\t\tconst y = Math.sin(2 * Math.PI * percent)\r\n\r\n\t\treturn [x,y]\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"chart-page page\">\t\t\r\n\t\t\t<h1>Pie Chart</h1>\r\n\r\n\t\t\t{pies.length > 0 ?\r\n\t\t\t\t<svg viewBox=\"-2 -2 4 4\" style={{transform: \"rotate(-90deg)\"}}>{pies}</svg> :\r\n\t\t\t\t<Link to=\"/\"><div className=\"empty-message\">Please, input some data</div></Link>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}","import React, {useContext} from 'react'\r\n\r\nimport {Context} from '../ListContext'\r\n\r\n\r\nexport default function InputItem(props) {\r\n\tconst {title, amount, id} = props\r\n\r\n\tconst {editItem, removeItem} = useContext(Context)\r\n\r\n\tconst validateField = e => {\r\n\t\tconst {name, value} = e.target\r\n\t\tif(value === \"\") {\r\n\t\t\te.target.classList.add(\"warning\") \r\n\t\t}\r\n\t\tif(name === \"amount\" && isNaN(parseInt(value, 10))) {\r\n\t\t\te.target.value = 0\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleRemove = (e, id) => {\r\n\t\te.preventDefault()\r\n\t\tremoveItem(id)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form>\r\n\t\t\t<input \r\n\t\t\t\ttype=\"text\" \r\n\t\t\t\tmaxLength=\"20\"\r\n\t\t\t\tname=\"title\" \r\n\t\t\t\tvalue={title} \r\n\t\t\t\tonChange={e => editItem(e, id)} \r\n\t\t\t\tplaceholder=\"Title\"\r\n\t\t\t\tonFocus={e => e.target.classList.remove(\"warning\")}\r\n\t\t\t\tonBlur={e => validateField(e)}\r\n\t\t\t/>\r\n\t\t\t<input \r\n\t\t\t\ttype=\"number\" \r\n\t\t\t\tmin=\"0\"\r\n\t\t\t\tname=\"amount\" \r\n\t\t\t\tvalue={amount} \r\n\t\t\t\tonChange={e => editItem(e, id)} \r\n\t\t\t\tplaceholder=\"Amount\"\r\n\t\t\t\tonFocus={e => e.target.classList.remove(\"warning\")}\r\n\t\t\t\tonBlur={e => validateField(e)}\r\n\t\t\t/>\r\n\t\t\t<input \r\n\t\t\t\tclassName=\"remove-button\"\r\n\t\t\t\ttype=\"submit\" \r\n\t\t\t\tvalue=\"remove\"\r\n\t\t\t\tonClick={e => handleRemove(e, id)}\r\n\t\t\t/>\r\n\t\t</form>\r\n\t)\r\n}","import React, {useContext} from 'react'\r\n\r\nimport InputItem from '../components/InputItem'\r\nimport {Context} from '../ListContext'\r\n\r\nexport default function FormPage() {\r\n\tconst {items, addItem} = useContext(Context)\r\n\r\n\tconst list = items.map((item, i) => <InputItem key={item.id} id={item.id} title={item.title} amount={item.amount} />).reverse()\r\n\r\n\treturn (\r\n\t\t<div className=\"form-page page\">\r\n\t\t\t<h1>Positions List</h1>\r\n\t\t\t<button onClick={e => addItem()}>Add Position</button>\r\n\t\t\t<div>\r\n\t\t\t\t{list.length > 0 ? list : <p>The list is empty</p>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}","import React from 'react'\nimport {Switch, Route, Redirect} from 'react-router-dom'\n\nimport Navbar from './components/Navbar'\nimport ChartPage from './pages/ChartPage'\nimport FormPage from './pages/FormPage'\nimport {ContextProvider} from \"./ListContext\"\n\n\nfunction App() {\n    return (\n        <ContextProvider>\n            <div>\n                <Navbar />\n                <Switch>\n                    <Route exact path=\"/\">\n                        <FormPage />\n                    </Route>\n                    <Route path=\"/view\">\n                        <ChartPage />\n                    </Route>\n                    <Redirect to=\"/\" />\n                </Switch>\n            </div>\n        </ContextProvider>\n    )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n\t<Router>\n    \t<App />\n    </Router>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}